{"version":3,"sources":["app/scripts.babel/popup.js"],"names":[],"mappings":"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","file":"app/scripts.babel/popup.js","sourcesContent":["'use strict';\nconst destinationsEl = document.getElementById('destinations');\nconst myNameEl = document.getElementById('myName');\nconst statusEl = document.getElementById('status');\n\n// eslint hack\nlet _ = _;\n\nchrome.storage.sync.get(null, (store) => {\n\tchrome.storage.local.get(null, (local) => {\n\t\t_.keys(store).forEach( (key) => {\n\t\t\tif (local.uid !== key) {\n\t\t\t\tlet el = document.createElement('option');\n\t\t\t\tel.textContent = store[key].name;\n\t\t\t\tel.value = key;\n\t\t\t\tdestinationsEl.appendChild(el);\n\t\t\t} else {\n\t\t\t\tmyNameEl.textContent = store[key].name;\n\t\t\t}\n\t\t});\n\t});\n});\n\n\nfunction uiSuccess () {\n\tconsole.log('success!');\n\tstatusEl.textContent = 'Sent!';\n}\n\nfunction uiDuplicate () {\n\tstatusEl.textContent = 'Already sent.';\n}\n\nfunction sendTab(tab, uid) {\n\tchrome.storage.sync.get(uid, (store) => {\n\t\t// const newStore = _.clone(store);\n\n\t\t// Check if tab is already inbound (by url)\n\t\tconst urls = _.pluck( store[ uid ].tabs.inbound, 'url');\n\t\tif ( _.contains(urls, tab.url) ) {\n\t\t\tuiDuplicate();\n\t\t} else {\n\n\t\t\tconst newInbound = _.clone( store[uid].tabs.inbound );\n\t\t\tnewInbound.push( tab );\n\n\t\t\tstore[ uid ].tabs.inbound = newInbound;\n\t\t\tchrome.storage.sync.set(store, () => {\n\n\t\t\t\tchrome.storage.sync.get(uid, (store) => {\n\t\t\t\t\tconsole.log(store);\n\t\t\t\t\tuiSuccess();\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t});\n}\n\nfunction handleSendClick () {\n\tchrome.tabs.getSelected(null, (tab) => {\n\t\tconst outboundTab =_.pick(tab, ['url', 'title', 'favIconUrl']);\n\t\tsendTab(outboundTab, destinationsEl.value);\n\t});\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    const link = document.getElementById('clicking');\n    // onClick's logic\n    link.addEventListener('click', (ev) => {\n        handleSendClick(ev);\n    });\n});\n\n"]}